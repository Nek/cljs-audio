{"version":3,"sources":["editscript/edit.cljc"],"mappings":"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","names":["editscript$edit$IEdit$auto_sizing$dyn","x__4509__auto__","m__4510__auto__","editscript.edit/auto-sizing","goog/typeOf","m__4508__auto__","cljs.core/missing-protocol","editscript$edit$IEdit$add_data$dyn","editscript.edit/add-data","editscript$edit$IEdit$delete_data$dyn","editscript.edit/delete-data","editscript$edit$IEdit$replace_data$dyn","editscript.edit/replace-data","editscript$edit$IEdit$replace_str$dyn","editscript.edit/replace-str","editscript.edit/IEdit","this","path","value","ops","editscript$edit$IEditScript$combine$dyn","editscript.edit/combine","editscript$edit$IEditScript$get_size$dyn","editscript.edit/get-size","editscript$edit$IEditScript$set_size$dyn","editscript.edit/set-size","editscript$edit$IEditScript$edit_distance$dyn","editscript.edit/edit-distance","editscript$edit$IEditScript$get_edits$dyn","editscript.edit/get-edits","editscript$edit$IEditScript$get_adds_num$dyn","editscript.edit/get-adds-num","editscript$edit$IEditScript$get_dels_num$dyn","editscript.edit/get-dels-num","editscript$edit$IEditScript$get_reps_num$dyn","editscript.edit/get-reps-num","editscript.edit/IEditScript","that","size","editscript$edit$IType$get_type$dyn","editscript.edit/get-type","editscript.edit/IType","editscript.edit/nada","js/editscript","js/editscript.edit","js/editscript.edit.t_editscript$edit49668","editscript.edit/t_editscript$edit49668","_49670","meta49669","cljs.core/PROTOCOL_SENTINEL","this__4450__auto__","writer__4451__auto__","opt__4452__auto__","cljs.core/-write","editscript.edit/->t_editscript$edit49668","_","goog.object/set","cljs.core/List","cljs.core/EmptyList","cljs.core/Cons","cljs.core/PersistentArrayMap","cljs.core/PersistentHashMap","cljs.core/PersistentTreeMap","cljs.core/PersistentVector","cljs.core/Subvec","cljs.core/MapEntry","cljs.core/PersistentHashSet","cljs.core/PersistentTreeSet","editscript.edit/sizing*","data","up","s","G__49843","fexpr__49842","cljs.core/-vreset!","cljs.core/-deref","seq__49844","cljs.core/seq","chunk__49845","count__49846","i__49847","temp__5753__auto__","cljs.core/chunked-seq?","c__4638__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","cljs.core/first","cljs.core/next","child","editscript.edit/sizing","cljs.core/deref","cljs.core/volatile!","editscript.edit/EditScript","editscript.edit/->EditScript","edits","auto-sizing?","adds-num","dels-num","reps-num","cljs.core/long","cljs.core.conj","cljs.core.into","editscript.edit/valid-str-edits?","cljs.core/vector?","cljs.core/every?","x","or__4212__auto__","cljs.core/nat-int?","and__4210__auto__","cljs.core._EQ_","vec__49874","cljs.core.nth","op","y","fexpr__49877","G__49878","cljs.core/Keyword","js/Error","editscript.edit/valid-edit?","edit","c","vec__49880","fexpr__49885","editscript.edit/valid-edits?","editscript.edit/count-str-ops","adds","dels","reps","seq__49890","chunk__49892","count__49893","i__49894","d","G__49906","G__49914","editscript.edit/count-ops","seq__49921","chunk__49923","count__49924","i__49925","vec__49939","vec__49949","G__49943","G__49953","editscript.edit/edits->script","vec__49961","o","writer","opts","cljs.core.write_all"],"sourcesContent":[";;\n;; Copyright (c) Huahai Yang. All rights reserved.\n;; The use and distribution terms for this software are covered by the\n;; Eclipse Public License 1.0 (http://opensource.org/licenses/eclipse-1.0.php)\n;; which can be found in the file LICENSE at the root of this distribution.\n;; By using this software in any fashion, you are agreeing to be bound by\n;; the terms of this license.\n;; You must not remove this notice, or any other, from this software.\n;;\n\n(ns ^:no-doc editscript.edit\n  #?(:clj (:import [clojure.lang PersistentVector IPersistentList IPersistentMap\n                    IPersistentSet IPersistentVector MapEntry]\n                   [java.util Map$Entry])))\n\n(defprotocol IEdit\n  (auto-sizing [this path value])\n  (add-data [this path value])\n  (delete-data [this path])\n  (replace-data [this path value])\n  (replace-str [this path ops]))\n\n(defprotocol IEditScript\n  (combine [this that]\n    \"Concate that editscript onto this editscript, return the new editscript\")\n  (get-size [this] \"Report the size of the editscript\")\n  (set-size [this size] \"Set the size, return the script\")\n  (edit-distance [this] \"Report the edit distance, i.e number of operations\")\n  (get-edits [this] \"Report the edits as a vector\")\n  (get-adds-num [this] \"Report the number of additions\")\n  (get-dels-num [this] \"Report the number of deletions\")\n  (get-reps-num [this] \"Report the number of replacements\"))\n\n(defprotocol IType\n  (get-type [this] \"Return a type keyword, :val, :map, :lst, etc.\"))\n\n(defn nada\n  \"A special type means 'not present'\"\n  []\n  (reify IType\n    (get-type [_] :nil)))\n\n#?(:clj\n   (extend-protocol IType\n     IPersistentList\n     (get-type [_] :lst)\n\n     IPersistentMap\n     (get-type [_] :map)\n\n     IPersistentVector\n     (get-type [_] :vec)\n\n     IPersistentSet\n     (get-type [_] :set)\n\n     Map$Entry\n     (get-type [_] :val)\n\n     MapEntry\n     (get-type [_] :val)\n\n     nil\n     (get-type [_] :val)\n\n     String\n     (get-type [_] :str)\n\n     Object\n     (get-type [_] :val))\n\n   :cljs\n   (extend-protocol IType\n     List\n     (get-type [_] :lst)\n\n     EmptyList\n     (get-type [_] :lst)\n\n     Cons\n     (get-type [_] :lst)\n\n     PersistentArrayMap\n     (get-type [_] :map)\n\n     PersistentHashMap\n     (get-type [_] :map)\n\n     PersistentTreeMap\n     (get-type [_] :map)\n\n     PersistentVector\n     (get-type [_] :vec)\n\n     Subvec\n     (get-type [_] :vec)\n\n     MapEntry\n     (get-type [_] :val)\n\n     PersistentHashSet\n     (get-type [_] :set)\n\n     PersistentTreeSet\n     (get-type [_] :set)\n\n     nil\n     (get-type [_] :val)\n\n     string\n     (get-type [_] :str)\n\n     default\n     (get-type [_] :val)))\n\n(defn- sizing*\n  [data size]\n  (let [up (fn [s] (inc ^long s))]\n    (if (#{:vec :lst :map :set} (get-type data))\n      (do (vswap! size up)\n          (doseq [child data]\n            (sizing* child size)))\n      (vswap! size up))))\n\n(defn- sizing\n  [data]\n  (let [size (volatile! 0) ]\n    (sizing* data size)\n    @size))\n\n(deftype ^:no-doc EditScript [^:unsynchronized-mutable ^PersistentVector edits\n                              ^boolean auto-sizing?\n                              ^:unsynchronized-mutable ^long size\n                              ^:unsynchronized-mutable ^long adds-num\n                              ^:unsynchronized-mutable ^long dels-num\n                              ^:unsynchronized-mutable ^long reps-num]\n\n  IEdit\n  (auto-sizing [this path value]\n    (when auto-sizing?\n      (set! size (long (+ 2 size (sizing path) (if value (sizing value) 0)))))\n    this)\n  (add-data [this path value]\n    (locking this\n      (set! adds-num (inc adds-num))\n      (set! edits (conj edits [path :+ value]))\n      (auto-sizing this path value)))\n  (delete-data [this path]\n    (locking this\n      (set! dels-num (inc dels-num))\n      (set! edits (conj edits [path :-]))\n      (auto-sizing this path nil)))\n  (replace-data [this path value]\n    (locking this\n      (set! reps-num (inc reps-num))\n      (set! edits (conj edits [path :r value]))\n      (auto-sizing this path value)))\n  (replace-str [this path ops]\n    (locking this\n      (set! reps-num (inc reps-num))\n      (set! edits (conj edits [path :s ops]))\n      (auto-sizing this path \"\")))\n\n  IEditScript\n  (combine [_ that]\n    (EditScript. (into edits (get-edits that))\n                 auto-sizing?\n                 (+ size (get-size that))\n                 (+ adds-num (get-adds-num that))\n                 (+ dels-num (get-dels-num that))\n                 (+ reps-num (get-reps-num that))))\n  (get-size [_] size)\n  (set-size [this s] (set! size (long s)) this)\n  (get-edits [_] edits)\n  (get-adds-num [_] adds-num)\n  (get-dels-num [_] dels-num)\n  (get-reps-num [_] reps-num)\n  (edit-distance [_] (+ adds-num dels-num reps-num)))\n\n(defn- valid-str-edits?\n  [data]\n  (and (vector? data)\n       (every? (fn [x]\n                 (or (nat-int? x)\n                     (and (vector? x)\n                          (= 2 (count x))\n                          (let [[op y] x]\n                            (and\n                              (#{:- :r :+} op)\n                              (case op\n                                :-      (nat-int? y)\n                                (:+ :r) (string? y)))))))\n               data)))\n\n(defn- valid-edit?\n  [edit]\n  (when (vector? edit)\n    (let [c (count edit)]\n      (when (< 1 c 4)\n        (let [[path op data] edit]\n          (and (vector? path)\n               (#{:- :r :+ :s} op)\n               (if (= :- op)\n                 (nil? data)\n                 (= c 3))\n               (if (= :s op)\n                 (valid-str-edits? data)\n                 true)))))))\n\n(defn valid-edits?\n  [edits]\n  (when (vector? edits)\n    (if (seq edits)\n      (every? valid-edit? edits)\n      true)))\n\n(defn- count-str-ops\n  [data adds dels reps]\n  (doseq [d     data\n          :when (vector? d)]\n    (case (first d)\n      :+ (vswap! adds inc)\n      :- (vswap! dels inc)\n      :r (vswap! reps inc))))\n\n(defn- count-ops\n  [edits]\n  (let [adds (volatile! 0)\n        dels (volatile! 0)\n        reps (volatile! 0)]\n    (doseq [[_ op data] edits]\n      (case op\n        :+ (vswap! adds inc)\n        :- (vswap! dels inc)\n        :r (vswap! reps inc)\n        :s (count-str-ops data adds dels reps)))\n    [@adds @dels @reps]))\n\n(defn edits->script\n  \"Create an EditScript instance from a vector of edits, like those obtained\n  through calling `get-edits` on an EditScript\"\n  [edits]\n  (assert (valid-edits? edits) \"Not a vector of valid edits\")\n  (let [[adds dels reps] (count-ops edits)]\n    (->EditScript edits true (sizing edits) adds dels reps)))\n\n\n#?(:clj (defmethod print-method EditScript\n          [x ^java.io.Writer writer]\n          (print-method (get-edits x) writer))\n   :cljs (extend-protocol IPrintWithWriter\n           EditScript\n           (-pr-writer [o writer opts]\n             (write-all writer (str (get-edits o))))))\n"]}